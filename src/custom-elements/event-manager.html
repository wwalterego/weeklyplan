<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">


<dom-module id="event-manager">
  <template>
    <style include="shared-styles">
      :host {
        display: block;

        padding: 10px;
      }
    </style>

  <app-messages id="messages"></app-messages>

    <div>
        <h1>EVENT MANAGER</h1>
        <paper-input label="Title" id="title"></paper-input>
        <paper-input label="Description" id="description"></paper-input>
        <paper-input label="Duration" id="duration"></paper-input>
        <paper-input label="Abbreviation" id="abbreviation"></paper-input>
       <paper-button raised on-tap="addEvent">+</paper-button>
    </div>

  
  </template>

  <script>
    Polymer({
      is: 'event-manager',

      addEvent: function(){
        
          var db = firebase.database();

          var email = 'walter.miani@gmail.com';
          var password = 'walter.miani@gmail.com';


          firebase.auth().signInWithEmailAndPassword(email, password).catch(function(error) {
            // Handle Errors here.
            var errorCode = error.code;
            var errorMessage = error.message;

            console.log(errorCode);
            console.log(errorMessage);
            // ...
          });


          var title = this.$.title.value;
          var description = this.$.description.value;
          var abbreviation = this.$.abbreviation.value;
          var duration = this.$.duration.value;

          // db.ref('events/' + title + '/').set({
          //   description: description,
          //   abbreviation: abbreviation,
          //   duration: duration
          // });
          var event = {
            title: title,
            description: description,
            abbreviation: abbreviation,
            duration: duration
          }

          db.ref().child('events').push(event);
          this.clearEvent();
          this.$.messages.modal("Event added","ok");

      },

      clearEvent: function(){
          this.$.title.value = "";
          this.$.description.value = "";
          this.$.abbreviation.value = "";
          this.$.duration.value = "";
      }
    });
  </script>
</dom-module>