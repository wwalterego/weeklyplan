<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">


<dom-module id="event-manager">
  <template>
    <style include="shared-styles">
      :host {
        display: block;

        padding: 10px;
      }
    </style>

  <app-messages id="messages"></app-messages>

    <div>
        <h1>EVENT MANAGER</h1>
        <paper-input label="Title" id="title"></paper-input>
        <paper-input label="Description" id="description"></paper-input>
        <paper-input label="Duration" id="duration"></paper-input>
        <paper-input label="Abbreviation" id="abbreviation"></paper-input>
        <paper-button raised on-tap="addEvent">+</paper-button>
    </div>

  
  </template>

  <script>
    Polymer({
      is: 'event-manager',

      properties:{
        user:{type:Object,notify:true}
      },

      addEvent: function(){
        
          var db = fb.database();

          var title = this.$.title.value;
          var description = this.$.description.value;
          var abbreviation = this.$.abbreviation.value;
          var duration = this.$.duration.value;
          
          var event = {
            title: title,
            description: description,
            abbreviation: abbreviation,
            duration: duration
          };

          db.ref().child('events/' + this.user.userUid).push(event);
          this.clearEvent();
          this.$.messages.modal("Event added","ok");

      },

      clearEvent: function(){
          this.$.title.value = "";
          this.$.description.value = "";
          this.$.abbreviation.value = "";
          this.$.duration.value = "";
      }
    });
  </script>
</dom-module>